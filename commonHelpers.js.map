{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formSearch = document.querySelector('.form-search');\nconst listImages = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.btn');\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\n\n\nconst api = axios.create({\n  baseURL: \" https://pixabay.com/api/\",\n  params: {\n    apiKey: \"41511305-1e730bfa7be67778e89c40f75\",\n    language: \"en\"\n  }\n});\n\nfunction createGalleryMarkup (pictures = []) {\n  const markup = pictures.reduce((html, {webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => html + `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      width=\"360\"\n    />\n  </a>\n  <div class=\"thumb-block\">\n    <div class=\"block\">\n      <h2 class=\"tittle\">Likes</h2>\n      <p class=\"amount\">${likes}</p>\n    </div>\n    <div class=\"block\">\n      <h2 class=\"tittle\">Views</h2>\n      <p class=\"amount\">${views}</p>\n    </div>\n    <div class=\"block\">\n      <h2 class=\"tittle\">Comments</h2>\n      <p class=\"amount\">${comments}</p>\n    </div>\n    <div class=\"block\">\n      <h2 class=\"tittle\">Downloads</h2>\n      <p class=\"amount\">${downloads}</p>\n    </div>\n  </div>\n</li>`, '');\nlistImages.insertAdjacentHTML('beforeend', markup);\n}\n\nlet query = '';\nlet page = 1;\nlet perPage = 40;\nlet totalPages = 1;\n\nformSearch.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n    event.preventDefault();\n    const inputValue = event.target.elements.search.value.trim();\n    loader.style.display = 'block';\nif(!inputValue) {\n  \n}\n    try {\n        const picture = await getPictures(inputValue);\n        const totalPages = Math.ceil(picture.totalHits / limit);\n\n        if (page > totalPages) {\n            loader.style.display = 'none';\n            return iziToast.error({\n                position: \"topRight\",\n                message: \"We're sorry, but you've reached the end of search results\"\n            });\n        }\n\n        createGalleryMarkup(picture);\n\n        page += 1;\n\n        if (page > 1) {\n            btnLoad.textContent = 'Loading images, please wait...';\n        }\n        lightbox.refresh();\n    } catch (error) {\n        loader.style.display = 'none';\n        console.log(error);\n    }\n    formSearch.reset();\n}\n\nasync function getPictures(name) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const KEY = '41511305-1e730bfa7be67778e89c40f75';\n\n    const searchParams = new URLSearchParams({\n        key: KEY,\n        q: name,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page\n    });\n\n    const response = await axios.get(`${BASE_URL}?${searchParams}`);\n\n    return response.data;\n}\n\nfunction clearPage () {\n  listImages.innerHTML = '';\n}"],"names":["formSearch","listImages","loader","btnLoad","lightbox","SimpleLightbox","axios","createGalleryMarkup","pictures","markup","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","page","perPage","onSearch","event","inputValue","picture","getPictures","totalPages","iziToast","error","name","BASE_URL","KEY","searchParams"],"mappings":"owBAMA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,MAAM,EACvCC,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAIhFC,EAAM,OAAO,CACvB,QAAS,4BACT,OAAQ,CACN,OAAQ,qCACR,SAAU,IACX,CACH,CAAC,EAED,SAASC,EAAqBC,EAAW,GAAI,CAC3C,MAAMC,EAASD,EAAS,OAAO,CAACE,EAAM,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAMP,EAAO;AAAA,kCACxFE;AAAA;AAAA;AAAA,aAGrBD;AAAA,aACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAOaC;AAAA;AAAA;AAAA;AAAA,0BAIAC;AAAA;AAAA;AAAA;AAAA,0BAIAC;AAAA;AAAA;AAAA;AAAA,0BAIAC;AAAA;AAAA;AAAA,OAGlB,EAAE,EACVhB,EAAW,mBAAmB,YAAaQ,CAAM,CACjD,CAGA,IAAIS,EAAO,EACPC,EAAU,GAGdnB,EAAW,iBAAiB,SAAUoB,CAAQ,EAE9C,eAAeA,EAASC,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAaD,EAAM,OAAO,SAAS,OAAO,MAAM,OACtDnB,EAAO,MAAM,QAAU,QAIvB,GAAI,CACA,MAAMqB,EAAU,MAAMC,EAAYF,CAAU,EACtCG,EAAa,KAAK,KAAKF,EAAQ,UAAY,KAAK,EAEtD,GAAIL,EAAOO,EACP,OAAAvB,EAAO,MAAM,QAAU,OAChBwB,EAAS,MAAM,CAClB,SAAU,WACV,QAAS,2DACzB,CAAa,EAGLnB,EAAoBgB,CAAO,EAE3BL,GAAQ,EAEJA,EAAO,IACPf,EAAQ,YAAc,kCAE1BC,EAAS,QAAO,CACnB,OAAQuB,EAAP,CACEzB,EAAO,MAAM,QAAU,OACvB,QAAQ,IAAIyB,CAAK,CACpB,CACD3B,EAAW,MAAK,CACpB,CAEA,eAAewB,EAAYI,EAAM,CAC7B,MAAMC,EAAW,2BACXC,EAAM,qCAENC,EAAe,IAAI,gBAAgB,CACrC,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUT,EACV,KAAMD,CACd,CAAK,EAID,OAFiB,MAAMZ,EAAM,IAAI,GAAGuB,KAAYE,GAAc,GAE9C,IACpB"}