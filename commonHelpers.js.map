{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formSearch = document.querySelector('.form-search');\nconst listImages = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.btn-load');\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"41511305-1e730bfa7be67778e89c40f75\";\n\nasync function servicePixabay(search, page, perpage) {\n  const params = new URLSearchParams({\n   key: KEY,\n        q: search,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page,\n  });\n\n  const response = await axios.get(`${BASE_URL}?${params}`);\n\n  return response.data;\n}\n\n\nfunction createGalleryMarkup (pictures = []) {\n  const markup = pictures.reduce((html, {webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => html + `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      width=\"360\"\n    />\n  </a>\n  <div class=\"thumb-block\">\n    <div class=\"block\">\n      <h2 class=\"tittle\">Likes</h2>\n      <p class=\"amount\">${likes}</p>\n    </div>\n    <div class=\"block\">\n      <h2 class=\"tittle\">Views</h2>\n      <p class=\"amount\">${views}</p>\n    </div>\n    <div class=\"block\">\n      <h2 class=\"tittle\">Comments</h2>\n      <p class=\"amount\">${comments}</p>\n    </div>\n    <div class=\"block\">\n      <h2 class=\"tittle\">Downloads</h2>\n      <p class=\"amount\">${downloads}</p>\n    </div>\n  </div>\n</li>`, '');\nlistImages.insertAdjacentHTML('beforeend', markup);\n}\n\nlet query = '';\nlet page = 1;\nlet perPage = 40;\nlet totalPages = 1;\n\nformSearch.addEventListener('submit', onSearch);\n\n\n\n\n// async function onSearch(event) {\n//   event.preventDefault();\n//   const inputValue = event.target.elements.search.value.trim();\n//   loader.style.display = 'block';\n//   if (!inputValue) {\n//     iziToast.error({ message: 'Sorry, there are no images matching your search query. Please try again!' });\n//     clearPage();\n//     return;\n//   }\n//   clearPage();\n//   page = 1;\n//   query = inputValue;\n\n// }\n\n\n\n//         const picture = await getPictures(inputValue);\n//         const totalPages = Math.ceil(picture.totalHits / limit);\n\n//         if (page > totalPages) {\n//             loader.style.display = 'none';\n//             return iziToast.error({\n//                 position: \"topRight\",\n//                 message: \"We're sorry, but you've reached the end of search results\"\n//             });\n//         }\n\n//         createGalleryMarkup(picture);\n\n//         page += 1;\n\n//         if (page > 1) {\n//             btnLoad.textContent = 'Loading images, please wait...';\n//         }\n//         lightbox.refresh();\n//     } catch (error) {\n//         loader.style.display = 'none';\n//         console.log(error);\n//     }\n//     formSearch.reset();\n// }\n\n// async function getPictures(name) {\n//     const BASE_URL = 'https://pixabay.com/api/';\n//     const KEY = '41511305-1e730bfa7be67778e89c40f75';\n\n//     const searchParams = new URLSearchParams({\n//         key: KEY,\n//         q: name,\n//         image_type: 'photo',\n//         orientation: 'horizontal',\n//         safesearch: true,\n//         per_page: perPage,\n//         page: page\n//     });\n\n//     const response = await axios.get(`${BASE_URL}?${searchParams}`);\n\n//     return response.data;\n// }\n\nfunction clearPage () {\n  listImages.innerHTML = '';\n}"],"names":["formSearch","SimpleLightbox"],"mappings":"svBAMA,MAAMA,EAAa,SAAS,cAAc,cAAc,EACrC,SAAS,cAAc,UAAU,EACrC,SAAS,cAAc,SAAS,EAC/B,SAAS,cAAc,WAAW,EACjC,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,EA4D5FD,EAAW,iBAAiB,SAAU,QAAQ"}